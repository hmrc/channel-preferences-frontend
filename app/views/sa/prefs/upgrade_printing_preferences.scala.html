@(emailAddress: Option[String],
  returnUrl: String,
  tandc: Form[_],
  appConfig: controllers.sa.prefs.config.AppConfig = controllers.sa.prefs.config.YtaConfig
)(implicit request: Request[_])

@import uk.gov.hmrc.play.views.html.helpers.form
@import uk.gov.hmrc.urls.Link
@import uk.gov.hmrc.play.views.html.helpers._
@import uk.gov.hmrc.play.views.html.{layouts => uiLayouts}

@signoutLink = {
  <li><a id="logOutNavHref" href="@appConfig.taiSignOutUrl" data-journey-click="primary-navigation:Click:Sign out">Sign out</a></li>
}

@betaBanner = {
    @uiLayouts.betaBanner(
      userLoggedIn = true,
      betaFeedbackUrl = appConfig.betaFeedbackUrl,
      betaFeedbackUnauthenticatedUrl = appConfig.betaFeedbackUnauthenticatedUrl,
      showFeedbackLinkInBetaBanner = true)
}

@main(title = "Get email notifications", navTitle = "", navLinks = signoutLink, betaBanner = betaBanner) {

  <h1 class="email-notifications__heading">
    <span class="email-notifications__subheading-text">Before you check your Income Tax</span>
    <p class="email-notifications__heading-text push">Get email notifications</p>
  </h1>

  <p class="email-notifications__p font-medium">You can choose to get email notifications about your Income Tax.</p>

  <p class="email-notifications__list-heading font-small">Like the emails you get for Self Assessment, the notifications won't contain any personal or tax details and will we tell you if:</p>

  <ul class="email-notifications__list bullets">
    <li class="font-small">your Income Tax estimate has changed</li>
    <li class="font-small">there's something you need to see or do</li>
  </ul>

  @emailAddress.map { emailAddress =>
      <p id="opted-in-email" class="font-small">We'll send emails to @emailAddress. You’ll be able to manage your message settings through 'Your tax account’.</p>
  }

  <p class="email-notifications__indent panel-indent">You'll still continue to receive paper copies of important documents.</p>

  <div class="email-form-errors">
      @tandc.globalErrors.map { error => <label class="error-notification">@Messages(error.message)</label>}
  </div>

  @form(action = controllers.sa.prefs.internal.routes.UpgradeRemindersController.upgrade(returnUrl)){

  @*
      @singleCheckbox(
      tandc("accept-tc"),
           '_label -> Html(Messages("sa_printing_preference.tc.preLinkText", Link.toExternalPage(id = Some("terms-and-conditions"), url =  controllers.sa.prefs.internal.routes.BizTaxPrefsController.termsAndConditions.url, value = Some(Messages("sa_printing_preference.tc.linkText"))).toHtml)),
          '_labelClass -> "label--inline"
      )

  *@
      <p><button id="confirm-upgrade" class="link" name="submitButton" type="submit" value="digital">Sign up for email notifications</button></p>
  
      <button id="cancel-upgrade" class="link button--link-style" name="submitButton" type="submit" value="non-digital">No, I don't want to sign up for email notifications</button>
  }

}
