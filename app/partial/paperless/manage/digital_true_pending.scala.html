@*
 * Copyright 2021 HM Revenue & Customs
 *
 *@

@import controllers.ExternalUrlPrefixes
@this(externalUrlPrefixes: ExternalUrlPrefixes, digitalTrueLinks: digital_true_links)
@(email: connectors.EmailPreference)(implicit request: Request[_], messages: Messages, hostContext: model.HostContext)
@import connectors.EmailPreference
@import uk.gov.hmrc.urls.Link
@import uk.gov.hmrc.emailaddress.EmailAddress
@import uk.gov.hmrc.play.views.html.helpers._
@import views.sa.prefs.helpers.DateFormat.longDateFormat

<section>
    <h2 id="saEmailRemindersHeader">@Messages("manage.paperless.email.notification.header")</h2>
    <p>@Messages("manage.paperless.email.need.verify")</p>
    <div class="indent">
        <p id="pending-status-message">@Messages("manage.paperless.email.sent_to") <strong id="email-address">@{email.email}</strong> @Html(Messages("manage.paperless.email.click_on_link", longDateFormat(email.linkSent).getOrElse("")))</p>
    </div>
    @form(action = play.api.mvc.Call("POST", externalUrlPrefixes.pfUrlPrefix + controllers.internal.routes.ManagePaperlessController.resendVerificationEmail(hostContext).url)){
        <p> @Messages("manage.paperless.email.cannot.find") <button id="resend-email-button" class="button--link-style" type="submit" data-journey-click="self-assessment-preferences-page:Click:Send a new verification email">@Messages("manage.paperless.email.send.new.verification")</button></p>
    }

    @digitalTrueLinks(email, "change-email-address-link")
</section>

