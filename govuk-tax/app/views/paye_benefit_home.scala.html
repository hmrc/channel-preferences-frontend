@(benefits: Seq[controllers.DisplayBenefit])

@import views.formatting.Dates._
@import config.RefData._

@main(title = "Your tax home") {

    <h2>Current benefits-in-kind</h2>
    <table>

        <tr>
            <th align="left" width="30%">Employment reference</th>
            <th align="left" width="15%">Benefit Type</th>
            <th align="left" width="40%">Description</th>
            <th align="left" width="15%">Cash equivalent/Taxable amount</th>
            <th>Actions</th>
        </tr>


        @for(benefit <- benefits) {

            <tr>
                <td>@benefit.employment.taxDistrictNumber / @benefit.employment.payeNumber<br>
                    From @formatDate(benefit.employment.startDate) to @formatDate(benefit.employment.endDate, "present")
                </td>
                <td>@iabdTypeFor(benefit.benefit.benefitType)</td>

                @benefit.car.map { car =>
                    <td>
                            Engine size: @engineSizeFor(car.engineSize)<br>
                            Fuel type: @fuelTypeFor(car.fuelType)<br>
                            Date car registered: @formatDate(car.dateCarRegistered.get)<br>
                    </td>
                }.getOrElse {
                    <td>@iabdTypeFor(benefit.benefit.benefitType)</td>
                }
                <td align="right" >Â£ @benefit.benefit.grossAmountToString()</td>
                @benefit.car.map { car =>
                <td>
                    <ul>
                        <li>Change</li>
                        <li><a href="@routes.PayeController.carBenefit(benefit.benefit.sequenceNumber)">Remove</a></li>
                </ul>
                }.getOrElse {
                <td>
                    More Information
                </td>
                }
            </tr>
            }

    </table>
}

