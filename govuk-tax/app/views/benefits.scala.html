@(benefits: Seq[(microservice.paye.domain.Benefit, microservice.paye.domain.Employment)])


@import org.joda.time.format.DateTimeFormat

@defining(DateTimeFormat.forPattern("MMMM d, yyyy")) { dateFormatter =>

    @main(title = "Your tax home") {

        <h2>Current benefits-in-kind</h2>
        <table>

            <tr>
                <th align="left" width="30%">Employment reference</th>
                <th align="left" width="15%">Benefit Type</th>
                <th align="left" width="40%">Description</th>
                <th align="left" width="15%">Cash equivalent/Taxable amount</th>
            </tr>


            @for(benefit <- benefits) {

                <tr>
                    <td>@benefit._2.taxDistrictNumber / @benefit._2.payeNumber<br>
                        From @dateFormatter.print(benefit._2.startDate) to @if(benefit._2.endDate) {@dateFormatter.print(benefit._2.endDate.get)} else {present}
                    </td>
                    <td>Type id: @benefit._1.benefitType</td>

                    @if(benefit._1.cars.size > 0) {
                        <td>
                            @for(car <- benefit._1.cars) {
                                Engine size: @car.engineSize<br>
                                Fuel type: @car.fuelType<br>
                                Date car registered: @dateFormatter.print(car.dateCarRegistered)<br>
                            }
                        </td>
                    } else {
                        <td></td>
                    }
                    <td align="right" >Â£ @benefit._1.grossAmountToString()</td>
                </tr>
                }

        </table>
    }
}


