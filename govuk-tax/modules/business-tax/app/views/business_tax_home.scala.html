@(accountSummaries: controllers.bt.accountsummary.AccountSummaries)(implicit user: uk.gov.hmrc.common.microservice.domain.User)

@import views.helpers.RenderableMessageProperty.Link._
@import views.formatting.Dates._
@import config.PortalConfig
@import uk.gov.hmrc.common.PortalUrlBuilder

@main(title = "Your tax account", nav = true, sidebarLinks = Some(sidebarLinks), user= Some(user), header = Some(header)) {

    @for(ac <- accountSummaries.regimes) {
        <article id="@ac.regimeName" class="account-summary">
            <h2 class="heading-36 push--top">@Messages(ac.regimeName)</h2>

            @for(message <- ac.messages) {
                <p class="@message.messageKey">@Html(Messages(message.messageKey, message.params.map(_.render):_*))</p>
            }
            @if(!ac.addenda.isEmpty) {
                <h3>@Messages(ac.manageRegimeMessage)</h3>
                <ul class="action-list">
                    @for(addendum <- ac.addenda) {
                     <li>@helpers.link(Some(addendum.id), addendum.url, addendum.text, addendum.newWindow, addendum.sso)</li>

                    }
                </ul>
            }
        </article>
    }
    <article>
        <h2 class="heading-36">@Messages("bt.home.otherTaxes")</h2>
        <p>@Messages("bt.home.mergeAccounts.1")</p>

        @if(accountSummaries.regimes.size != 4) {
            <p>@Html(Messages("bt.home.mergeAccounts.2"))</p>
            <p>@helpers.link(Some("mergeGGHref"), controllers.bt.routes.MergeGGAccountsController.mergeGGAccounts.url, "Merge your Government Gateway accounts")</p>
        }
        <p>
            @Messages("bt.home.everythingElse.1")
            @helpers.link(Some("otherServicesHref"), controllers.bt.routes.OtherServicesController.otherServices.url, "bt.home.everythingElse.linkText")
            @Messages("bt.home.everythingElse.2")
        </p>
    </article>
}

@sidebarLinks = {
    <div class="service-info__related-subsection">

	<h2>@Messages("bt.home.sidebarLinks.title")</h2>

	<p class="service-info__help">@Messages("bt.home.sidebarLinks.info")</p>

	<nav class="service-info__navigation" role="navigation" aria-labelledby="parent-subsection">
	    <ul>
            <li>
                @helpers.link(Some("browseTax"), "https://www.gov.uk/browse/tax", "bt.home.sidebarLinks.money.text", NewWindow)
            </li>
            <li>
                @helpers.link(Some("webminars"), "http://www.hmrc.gov.uk/webinars/", "bt.home.sidebarLinks.webinars.text", NewWindow)
            </li>
            <li>
                @helpers.link(Some("youtube"), "http://www.youtube.com/hmrcgovuk", "bt.home.sidebarLinks.youtube.text", NewWindow)
            </li>
	    </ul>
	</nav>
    </div>
}
@header =  {
    @Messages("bt.home.title")
}
