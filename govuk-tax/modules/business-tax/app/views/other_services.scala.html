@(linksO : Option[List[controllers.bt.OtherServiceLink]], enrollLink: views.helpers.Link, deEnrollLink: views.helpers.Link, registrationLink: views.helpers.Link)(implicit user: uk.gov.hmrc.common.microservice.domain.User)

@main(title = "Your tax home", nav = true, user= Some(user)) {

<h1><span class="pre-heading">service</span> Other Services </h1>
<p>
    To see your other taxes here you must be registered for them and have online access.
    If both already applies but can't see them here, you're using different Government Gateway accounts for them. You have to
    @helpers.link("mergeGGHref", controllers.bt.routes.MergeGGAccountsController.mergeGGAccounts.url, "merge your accounts").
</p>

@linksO.map { links =>
<div id="manageYourTaxesSection">
    <h2>Manage your other taxes</h2>
    @if(links.isEmpty) {
    <p id="noOtherServices">There are no other taxes.</p>
    }else{
    <p id="availableServices">
        @for(link <- links){
            @helpers.link(link.id, link.url, link.text, link.newWindow, link.sso)
            @if(!link.sso) { @Messages("otherservices.manageTaxes.postLink.additionalLoginRequired") }
            <br>
        }
    </p>
    }
</div>
}

<div>
    <h2 id="enrollmentHeading">Get online access</h2>
    <p id="enrollmentMessage">You must already be registered for a tax to get
        <span id="onlineServicesEnrolmentLink">@helpers.link("otherServicesEnrolmentHref", enrollLink.url, "online access", enrollLink.newWindow, enrollLink.sso)</span>.</p>
</div>
<div>
    <h2 id="deEnrollmentHeading">Stop using an online service</h2>
    <p id="deEnrollmentMessage">To stop using one of the online services you can
        <span id="onlineServicesDeEnrolmentLink">@helpers.link("servicesDeEnrolmentHref", deEnrollLink.url, "de-enrol from it", deEnrollLink.newWindow, deEnrollLink.sso)</span>.</p>

</div>
<div>
    <h2 id="registrationHeading">Register for new business taxes</h2>

    @controllers.bt.otherservices.OtherServicesFactory.createRegistrationText(user).map { registrationText =>

            <p id="businessTaxesRegistrationLink">@helpers.link("businessRegistrationHref", registrationLink.url, registrationText, registrationLink.newWindow, registrationLink.sso)</p>
            <p id="registrationMessage">
                You can't use this service if you're setting up a limited liability partnership or you're not the 'nominated partner'
                in a self-employed business partnership. There are also a few other situations when you'll need to register a different way.
    }.getOrElse {
            <p id="registrationGenericMessage">
    }

            Find out more about registering for HMRC taxes on the <span id="hmrcWebsiteLink">@helpers.link("otherWaysHref", "http://www.hmrc.gov.uk/online/new.htm#2", "HMRC website", true)</span>.
        </p>

</div>


}