@(matchingPerson: models.agent.addClient.ClientSearch, addClient: Form[models.agent.addClient.ConfirmClient])

@main(title = "Add a new client") {

<h2>Add a new client to your agent tax account</h2>

    <h3>Check your client details</h3>

    <p>HMRC has found the following tax payer</p>

    <div name="clientSearchResults" id="clientSearchResults">
        <div class="@if(addClient.hasGlobalErrors){error}">
            <span name="globalErrors" id="globalErrors" class="error-notification">@addClient.globalError.map(_.message).getOrElse("")</span>
        </div>
        <p name="name" id="name">
            Name:
            @if(matchingPerson.firstName.isDefined){ <span name="firstName" id="firstName">@matchingPerson.firstName.getOrElse("")</span>  }
            @if(matchingPerson.lastName.isDefined){ <span name="lastName" id="lastName">@matchingPerson.lastName.getOrElse("")</span>  }
        </p>
    <p name="nino" id="nino">National Insurance Number: @matchingPerson.nino</p>

    @if(matchingPerson.dob.isDefined){ <p name="dob" id="dob"> Date of birth @views.formatting.Dates.formatDate(matchingPerson.dob.get) </p>  }


    @helper.form(action = controllers.agent.addClient.routes.ConfirmClientController.confirm()) {

        @helpers.singleCheckbox(addClient("correctClient"), '_label -> "This is the client I am looking for")
        @helpers.singleCheckbox(addClient("authorised"), '_label -> "I have authorisation from the client to act on their behalf for {regime} with {authority level}")
        @helpers.input(addClient("internalClientReference"), '_label -> "Your internal client reference number")

        <p>
            <input type="submit" value="Next" id="submit" @if(addClient.hasGlobalErrors){disabled="disabled"} />
        </p>
    }

    <a href="../add-client">This is not the client I am searching for - return to search</a>

    </div>
}