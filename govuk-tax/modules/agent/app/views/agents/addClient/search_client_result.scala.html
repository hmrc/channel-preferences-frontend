@(matchingPerson: models.agent.addClient.ClientSearch, form: Form[(models.agent.addClient.ConfirmClient, String)])

@main(title = "Add a new client") {

<h2>Add a new client to your agent tax account</h2>

    <h3>Check your client details</h3>

    <p>HMRC has found the following tax payer</p>

    <div name="clientSearchResults" id="clientSearchResults">
        <div class="@if(form.hasGlobalErrors){error}">
            <span name="globalErrors" id="globalErrors" class="error-notification">@form.globalError.map(_.message).getOrElse("")</span>
        </div>
        <p name="name" id="name">
            Name:
            @if(matchingPerson.firstName.isDefined){ <span name="firstName" id="firstName">@matchingPerson.firstName.getOrElse("")</span>  }
            @if(matchingPerson.lastName.isDefined){ <span name="lastName" id="lastName">@matchingPerson.lastName.getOrElse("")</span>  }
        </p>
    <p name="nino" id="nino">National Insurance Number: @matchingPerson.nino</p>

    @if(matchingPerson.dob.isDefined){ <p name="dob" id="dob"> Date of birth @views.formatting.Dates.formatDate(matchingPerson.dob.get) </p>  }


    @if(!form.hasGlobalErrors) {
        @helper.form(action = controllers.agent.addClient.routes.ConfirmClientController.confirm()) {

            @helpers.singleCheckbox(form("correctClient"), '_label -> "This is the client I am looking for")
            @helpers.singleCheckbox(form("authorised"), '_label -> "I have authorisation from the client to act on their behalf for {regime} with {authority level}")
            @helpers.input(form("internalClientReference"), '_label -> "Your internal client reference number")

            <input type="hidden" value="@{form("instanceId").value}" id="instanceId" name="instanceId" />
            <p>
                <input type="submit" value="Next" id="submit" />
            </p>
        }
    }

    <a id="goBack" name="goBack" href="../add-client">
        @{ form.hasGlobalErrors match {
            case false => "This is not the client I am searching for - return to search"
            case true => "Return to search"
        }}
    </a>

    </div>
}